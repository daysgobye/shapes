(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{163:function(e,t,a){e.exports=a(301)},168:function(e,t,a){},169:function(e,t,a){},301:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(52),s=a.n(i),o=(a(168),a(169),a(76)),l=a(23),c=a(24),u=a(27),p=a(25),h=a(28),m=a(74),d=a(303),f=(a(170),a(146),a(46)),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleLoad=function(){a.setState({image:a.image})},a.state={image:null},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return r.a.createElement(f.Image,{key:this.props.key,x:this.props.x,y:this.props.y,scaleX:this.props.scale,scaleY:this.props.scale,image:this.state.image,width:100,height:100,ref:function(t){e.imageNode=t}})}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).textFile=null,a.makeTextFile=function(e){var t=new Blob([e],{type:"text/plain"});return null!==a.textFile&&window.URL.revokeObjectURL(a.textFile),a.textFile=window.URL.createObjectURL(t),a.textFile},a.saveFile=function(){a.downloadURI(a.makeTextFile(JSON.stringify(a.props.savedRender)),"shapes.json")},a.downloadURI=function(e,t){var a=document.createElement("a");a.download=t,a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)},a.saveImage=function(){var e=a.props.stageRef.current.children[1].getContext("2d");console.log(e);var t=a.props.stageRef.current.getStage().toDataURL({pixelRatio:3});a.downloadURI(t,"stage.png")},a.state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{size:"sm",className:"m-1",color:"primary",onClick:this.saveImage},"Save Image"),r.a.createElement(d.a,{size:"sm",className:"m-1",color:"primary",onClick:this.saveFile},"Save set"),r.a.createElement("div",{id:"create"}))}}]),t}(n.Component),b=function(e,t){var a=100*t.minSize;return O(10,e-a)},O=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},y=function(e,t,a,n){var r=100*n.minSize;return t>a.pos.x-r&&t<a.pos.x+r&&e>a.pos.y-r&&e<a.pos.y+r},E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).posAllShapes=function(){a.savedRender=[],a.setState({shapes:a.props.shapes})},a.savedRender=[],a.renderArrayOfShapes=function(e){var t=[],n=[],i=0;for(console.log(e,"I need this shape flag");n.length<e.numToRender&&i<1e3;){for(var s=b(window.innerWidth-a.state.sideBar,e),l=b(window.innerHeight,e),c=!0,u=(e.scale,[].concat(n,Object(o.a)(a.savedRender))),p=0;p<u.flat().length;p++){var h=u.flat()[p];h.pos&&y(l,s,h,e)&&(console.log("overlap"),c=!1,i++)}c&&(t.push(r.a.createElement(g,{key:"img".concat(t.length*l*s),src:e.image,x:s,y:l,scale:e.minSize})),n.push(Object(m.a)({},e,{pos:{x:s,y:l}})))}return a.savedRender.push(n),t},a.shapeRender=function(){return a.state.shapes.map((function(e){return a.renderArrayOfShapes(e)}))},a.state={shapes:[],sideBar:210},a.stageRef=r.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.Stage,{ref:this.stageRef,width:window.innerWidth-this.state.sideBar,height:window.innerHeight},r.a.createElement(f.Layer,null,r.a.createElement(f.Rect,{x:0,y:0,width:window.innerWidth-this.state.sideBar,height:window.innerHeight,fill:"black"})),r.a.createElement(f.Layer,null,this.shapeRender())),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(v,{stageRef:this.stageRef,savedRender:this.savedRender}),r.a.createElement(d.a,{color:"danger",className:"m-1",size:"sm",onClick:this.posAllShapes},"mix")))}}]),t}(n.Component),j=function e(t,a){var n=this;Object(l.a)(this,e),this.toObj=function(){return{image:n.image,pos:n.pos,color:n.color,minSize:n.minSize,maxSize:n.maxSize}},this.setPos=function(e){n.pos=e},this.upDateNum=function(e){return n.numToRender=e,n},this.upDateMinSize=function(e){return n.minSize=e,n},this.image=t,this.imageName=a,this.pos={x:1,y:1},this.color="#fffff",this.minSize=1,this.maxSize=1,this.numToRender=1},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).makeShape=function(e){var t=new FileReader;t.readAsText(e.target.files[0]);var n=e.target.files[0].name;t.onload=function(e){var t=e.target.result.split("<"),r=t[1].split(" ");r.splice(2,0,'fill="white"'),r=r.join(" "),t.splice(1,1,r);var i=t.join("<"),s=new j(URL.createObjectURL(new Blob([i],{type:"image/svg+xml;charset=utf-8"})),n);a.props.addShape(s)}},a.state={},a.fileRef=r.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{type:"file",name:"",id:"",accept:".svg",onChange:function(t){return e.makeShape(t)}}))}}]),t}(n.Component),w=a(304),R=a(305),k=a(306),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onUpdateScale=function(){console.log(a.scaleRef.current.value),a.props.updateShape(a.props.shape.upDateMinSize(a.scaleRef.current.value))},a.onUpdateAmount=function(){a.props.updateShape(a.props.shape.upDateNum(a.amountToSpawnRef.current.value))},a.state={},a.amountToSpawnRef=r.a.createRef(),a.scaleRef=r.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.shape;return r.a.createElement(w.a,{key:this.props.key},r.a.createElement(R.a,null,r.a.createElement(k.a,{xs:"2",className:"bg-secondary"},r.a.createElement("img",{src:e.image,width:50,height:50,alt:""})),r.a.createElement(k.a,{xs:"5"},r.a.createElement("label",null,"number to spawn:",r.a.createElement("input",{type:"number",name:"number",className:"form-control",onChange:this.onUpdateAmount,ref:this.amountToSpawnRef,value:e.numToRender}))),r.a.createElement(k.a,{xs:"5"},r.a.createElement("label",null,"scale:",r.a.createElement("input",{type:"number",name:"number",className:"form-control",ref:this.scaleRef,onChange:this.onUpdateScale,value:e.minSize})))))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",null,"some things are missing / not ready yet"),r.a.createElement("p",null,"color, random scale, overlap control's, phone support,",r.a.createElement("br",null)," replay from saved files, some svgs are broken, exporting svg"))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.shapes.map((function(t,a){return r.a.createElement(x,{updateShape:e.props.updateShape,shape:t,key:a})})),r.a.createElement(S,{addShape:this.props.addShape}),r.a.createElement(C,null))}}]),t}(n.Component),U=a(310),L=a(307),N=a(308),I=a(309),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).addShape=function(e){var t=[e].concat(Object(o.a)(a.state.shapes));a.setState({shapes:t})},a.updateShape=function(e){var t=a.state.shapes.map((function(t){return t.image===e.image?e:t}));a.setState({shapes:t})},a.toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={shapes:[],isOpen:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E,{shapes:this.state.shapes})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",null,r.a.createElement(d.a,{className:"m-1",size:"sm",onClick:this.toggle},"add A Shape"))),r.a.createElement(U.a,{isOpen:this.state.isOpen,toggle:this.toggle},r.a.createElement(L.a,{toggle:this.toggle},"Add More Shapes"),r.a.createElement(N.a,null,r.a.createElement(z,{shapes:this.state.shapes,addShape:this.addShape,updateShape:this.updateShape})),r.a.createElement(I.a,null,r.a.createElement(d.a,{className:"m-1",color:"primary",onClick:this.toggle},"Done")," ")))}}]),t}(n.Component);var A=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(300);s.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[163,1,2]]]);
//# sourceMappingURL=main.d1ed0356.chunk.js.map